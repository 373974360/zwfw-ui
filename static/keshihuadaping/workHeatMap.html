<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>西安国际港务区 —— 政务服务管理系统</title>
    <style>
        html, body {
            width: 100%;
            height: 100%
        }

        body {
            height: 100%;
            width: 100%;
            margin: 0px;
            padding: 0px;
            background: url("img/beijingtu.jpg") no-repeat;
            /*background-color: #060606;*/
            background-size: 100% 100%;
        }

        .title {
            font-size: 3em;
            color: #fff;
            text-align: center;
            line-height: 1.8em;
        }
        #app {
            height: 85%;
            width: 100%;
            position: absolute;
            top: 10%;
            bottom: 5%;
            z-index: 0;
            overflow: hidden;
            word-break: break-all;
        }

        .flex-item {
            background: rgba(255, 255, 255, .1);
            border: solid 1px #117084;
            -webkit-border-radius: 20px;
            -moz-border-radius: 20px;
            border-radius: 10px;
            margin: 8px;
            color: #fff;
            overflow: hidden;
        }

        .flex-item.base {
            background: none;
            border: none;
            margin: 0px;
            color: transparent;
        }

        .item-title {
            font-size: 1.2em;
            margin-top: 2em;
            text-align: center;
            font-weight: bold;
        }

        .item-value {
            text-align: left;
            margin: 0.4em 0px;
            font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
        }

        .item-value span {
            font-weight: normal;
        }

        .flex-container {
            display: flex;
            height: 100%;
        }

        .flex-column {
            justify-content: space-evenly;
            flex-direction: column;

        }

        .flex-row {
            flex-direction: row;
        }

    </style>
    <link rel="stylesheet" href="css/liMarquee.css">
</head>


<body>
<div class="title">系统用户分布数据</div>
<div id="app">

    <div class="flex-container flex-row" style="margin: 0px 20px;">
        <div class="flex-item base" style="flex:7">
            <div class="flex-container flex-column">
                <div class="flex-item" style="flex:1.2">
                    <div class="flex-container flex-row">
                        <div class="flex-item"
                             style="flex:7;background: none;border: none;margin: 0px;">
                            <div id="heatmap" style="width:100%; height:100%"></div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="flex-item" style="flex: 2">
            <div class="item-title">办事频次Top10</div>
            <div style="margin: 2px 20px">
                <table id="window-accept-table" border="0" cellpadding="0" cellspacing="8"
                       style="width: 100%;">
                    <tr>
                        <th style="width: 75%;">
                            <div style="text-align: left;margin-left: 20%;" class="item-title">地址</div>
                        </th>
                        <th style="width: 23%;">
                            <div class="item-title" >频次</div>
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <div class="item-value">港务区中西部金融小镇</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO1}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">西安市国际港务区</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO2}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">西安市莲湖区北大街199号</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO3}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">陕西省西安市高新区锦业一路60号</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO4}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">西安国际港务区新筑镇解放村西</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO5}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">西安市灞桥区西航花园</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO6}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">西安市科技六路37号</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO7}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">西安市碑林区东关正街78号</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO8}}</div>
                        </td>
                    </tr><tr>
                        <td>
                            <div class="item-value">陕西省西安市经开区凤城六路西段131号</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO9}}</div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="item-value">西安市未央区文景路89号</div>
                        </td>
                        <td>
                            <div class="item-value" style="text-align: center">{{workNO10}}</div>
                        </td>
                    </tr>
                </table>

            </div>
        </div>
    </div>
</div>

<script src='http://api.map.baidu.com/api?v=2.0&ak=end6xXHXkwfNkxqhIZ18pTGiBQjAAFtv&callback=init'></script>
<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/jquery.liMarquee.js"></script>
<script src="../echarts-all.js"></script>
<script src="../jquery.SuperSlide.2.1.1.js"></script>
<script src="../vue.min.js"></script>
<!-- 引入 ECharts -->
<script src="../echarts.min.js"></script>
<!-- 引入百度地图扩展 -->
<script src="../bmap.min.js"></script>
<script type="text/javascript">
    var interfaceUrl = '';
</script>
<script type="text/javascript">

    var app = new Vue({
        el: '#app',
        data: {
            address: [],
            workNO1: '',
            workNO2: '',
            workNO3: '',
            workNO4: '',
            workNO5: '',
            workNO6: '',
            workNO7: '',
            workNO8: '',
            workNO9: '',
            workNO10: ''
        },
        methods: {
            getBaiDuReLiTuData: function () {
                var _this = this;
                $.ajax({
                    url: interfaceUrl + "/api/hallSystem/count/statistics/getBaiDuReLiTuData",
                    xhrFields: {
                        withCredentials: true
                    },
                    crossDomain: true,
                    success: function (response) {
                        if (response.httpCode === 200) {
                            _this.workNO1 = response.data.countTop10[0].count;
                            _this.workNO2 = response.data.countTop10[1].count;
                            _this.workNO3 = response.data.countTop10[2].count;
                            _this.workNO4 = response.data.countTop10[3].count;
                            _this.workNO5 = response.data.countTop10[4].count;
                            _this.workNO6 = response.data.countTop10[5].count;
                            _this.workNO7 = response.data.countTop10[6].count;
                            _this.workNO8 = response.data.countTop10[7].count;
                            _this.workNO9 = response.data.countTop10[8].count;
                            _this.workNO10 = response.data.countTop10[9].count;
                            _this.address = [];
                            _this.address.push(response.data.coordElevaVos);
                            console.log(_this.address)
                            var points = [].concat.apply([], _this.address.map(function (track) {
                                return track.map(function (seg) {
                                    return seg.coord.concat([1]);
                                });
                            }));
                            const e = echarts.init(document.getElementById('heatmap'));
                            e.setOption({
                                animation: false,
                                bmap: {
                                    center: [109.071688, 34.372438],
                                    zoom: 14,
                                    roam: true,
                                    mapStyle: {
                                        styleJson: [
                                            // 陆地
                                            {
                                                "featureType": "land",
                                                "elementType": "all",
                                                "stylers": {
                                                    "color": "#073763"
                                                }
                                            },
                                            // 水系
                                            {
                                                "featureType": "water",
                                                "elementType": "all",
                                                "stylers": {
                                                    "color": "#073763",
                                                    "lightness": -54
                                                }
                                            },
                                            // 国道与高速
                                            {
                                                "featureType": "highway",
                                                "elementType": "all",
                                                "stylers": {
                                                    "color": "#45818e"
                                                }
                                            },
                                            // 边界线
                                            {
                                                "featureType": "boundary",
                                                "elementType": "all",
                                                "stylers": {
                                                    "color": "#ffffff",
                                                    "lightness": -62,
                                                    "visibility": "on"
                                                }
                                            },
                                            // 行政标注
                                            {
                                                "featureType": "label",
                                                "elementType": "labels.text.fill",
                                                "stylers": {
                                                    "color": "#ffffff",
                                                    "visibility": "on"
                                                }
                                            },
                                            {
                                                "featureType": "label",
                                                "elementType": "labels.text.stroke",
                                                "stylers": {
                                                    "color": "#444444",
                                                    "visibility": "on"
                                                }
                                            }, {
                                                "featureType": "background",
                                                "elementType": "all",
                                                "stylers": {
                                                    "color": "#060606"
                                                }
                                            }
                                        ]
                                    }
                                },
                                visualMap: {
                                    show: false,
                                    top: 'top',
                                    min: 0,
                                    max: 5,
                                    seriesIndex: 0,
                                    calculable: true,
                                    inRange: {
                                        color: ['red']
                                    }
                                },
                                series: [{
                                    type: 'heatmap',
                                    coordinateSystem: 'bmap',
                                    data: points,
                                    pointSize: 15,
                                    blurSize: 5
                                }]
                            });
                        }
                    }
                })
            }
        },
        mounted: function () {
            this.$nextTick(function () {
                this.getBaiDuReLiTuData();
            })
            // setInterval(this.getBaiDuReLiTuData, 30000);
        }
    });


</script>
</body>
</html>
